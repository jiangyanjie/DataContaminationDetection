
package    cabservice;
import      java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.sql.*      ;
import java.sql.SQLException  ;
import javax.swi  ng.*;
/**
 *
 * @author Vi   kas Yadav
 */
public        class Add_City extends jav         ax   .swing.J     Frame {  
 Dbconn db;
   Stri    ng url ,city;
    int count=1   ; 
   Graphi  c   s g;  
      /** Creates new form Add_City */
           pu  bl    ic Add_City  ()                           {
           d    b= new Dbcon    n();
            initComponents();
              
            //  jPane l2.setVisibl  e(false);
                 city=JOpt ionP   ane.showInp   utDialog("enter the city    ")   ;
    }

      /** This m e   t      hod is c alled from with  in th  e constructor to
      * in itializ e         th e form.
     * WA        RNING: Do NOT modify  this  code. The content of this met      hod is
          * always regenerated by t      he Fo       r    m Editor. 
     */
    @SuppressWa   rnings("u n  checked")
    // <edito    r-fold defaultstate="coll         apsed" desc=    " Gen      erated Code">//GEN       -B   EGIN:initComponen  ts
                privat         e void     in         itComponents()     {
 
        jPanel1 = new    ja   vax.swing.JPanel();  
        jPanel2    =         new  javax.swin         g  .JPa   n   el();
        jLabel2 = new   javax.swing.JLabel();
           jCombo    Box2 = n  ew      ja   vax.swing.  JComboB    ox();
        jL  ab     el3 = new javax.swing.JLab     el   ();
                jLa     bel1 =      new ja  vax.swing.   JL abel();
        jComboB     ox1 = ne     w javax.swing   .JComboBox();
        jTextField1 = new   javax.s    wing.JTextField();
           j     B   utton1 = new javax.swing.JButton();
        jLabel4  = new javax.swi ng   .        JLabel();
            jButton2   = new java    x  .swing    .JButton();

           setDefaultCloseOpera     tion(javax.swing.WindowConstants.DIS   P    OSE_  ON_CLO    SE);

          jPanel1.setBac  kground(   new   java.awt.Colo  r(10    2, 255, 51)  );
          jPanel1.setToolTipText("Clic      k h    er e t o Add C    i    ty");
        jPanel1.     addMo   us   eListener(new             ja  v            a.awt.event.Mous   eAda  pter()        {
            publi c void mouse    Cli   cke  d(java.awt.event.M ous            eEven  t ev      t) {
                                            jPanel1  MouseClicked(evt);
            }
               })               ;

               javax.swi  ng.GroupLayout jPanel1Layout = new ja  vax.swing.G         roupLayo    ut(jPanel1);
         j   P       anel        1.setLayout(jPane  l1Layou    t); 
                   jPane    l1L   ayout.setHorizontalG  r  oup(
                    jPanel1Layout.createParallelG    roup(javax.swing.GroupLayout.Alignment.LEADING)
            .addG   ap(0   , 588, Short.MAX_VALUE)
            ); 
          jPanel1Layo ut.setVertica   l       Gr      oup(
                       jPanel1Layout.createPa rallel Group(javax.swing    .GroupLayout.Ali  gnment.LE   ADING)
                   .addGap(0, 19         9, Short.MAX_VALU      E    )
        )  ;
 
        jLabel 2.s     etText("LandMark       2");

        jComboBox2.setModel(new jav  ax.swing.DefaultComboBoxMode   l    (new String[] { "S  e lect" }));

        jLabel3.setText("D  istance(KM)");

         jLabel1.setText(" LandMa     rk 1");
   
                    j  C    omboBox1.setModel(new jav  a x.swing.DefaultComboBoxMo    del(new  String[] { "Select" }));

        jButton1.setText    ("Add Path");
        jB      utt on  1.addActio      nListen   e   r(      new java.      awt.eve     nt.A               ctionListener()    {
              public v     oid action     P    erformed(java.awt.even    t.ActionEvent e             vt) {   
                   jButton1  Actio   nPerfor  med(e vt);
                       }
        }); 

                  javax.s   wi   ng   .GroupLayout jPa  ne  l2L       ayout               =   new javax.swin  g. GroupLayout(jPanel2);
         jPanel2.set         Layou    t(jPanel2Layo          u         t);
        jPanel2Layou    t.setHorizonta       lGroup(
                       j Pane    l2Layout.c   reateParallelGr     oup(javax.swi    ng.Gro  u          pL ayout.Al     ignment.L   EADING)
            .a   ddGroup(jPanel2Layout.cr    eate                SequentialGroup(    )
                           .addGroup  (jPanel    2Layout.createParallelG  roup(j   avax.sw   ing   .  GroupLayout.Alignme nt     .LE  AD  ING, false)
                        .add    Group(j  Pane   l2La   yout.c rea          te     Sequential   Grou  p    ()
                                   .addCo  ntaine  rGap()
                                      .addComponent(j   Labe    l1)
                                         .addPre   ferredGap(jav     ax.swi ng.LayoutStyle.     ComponentPlac   em           ent.UNRELATE   D)
                              .addCo    mponent(jCom        boBox1, javax.swi   ng.GroupL   ayout.PREF ER  RED_SIZE,   javax.swing.GroupLa    yo     ut.     DEFAULT_SIZE, jav        ax.swing.GroupL    ayout.P REF ER  RED_SIZE)
                                      .addPrefe   rredGap(java x.swing   .Lay     outStyle.Com   ponentPlac   ement.R  EL     ATED, javax   .s     w ing.GroupLa   yout.DEF      AULT_S    IZE, Sh      ort  .     MAX_VA     LUE)
                             .add   Comp  o    nent(jLabel2)
                                          .addGap         (18, 18, 18)
                                 .a  ddCompo        ne        nt(jComboBox2     , java  x.sw   i  ng.Gr     oupLayou    t.PRE    FERRED_SIZE, 97,        javax.swing.GroupLayout.PREFERRED_SIZE))
                          .    ad dGroup(jPanel2Layout.   createSe       quen t  ial   G   roup()
                                           .ad   dG ap(2   28   , 228, 2           28)
                               .addCo       mponent(j Button1,        javax    .s   wing.Grou   pLayout.PREFERRED_SIZE,    107,     jav    ax.swing.GroupL  ayout.PREFER         RED     _SIZE)))
                 .addGap(38, 38, 38)
                .addComponent(       jLabel3)
                 .addPreferredGa  p(ja    vax.swing        .L ayoutStyle.ComponentPlac          eme      nt    .U  NREL      ATED)     
                       .   a     ddComponent(jTextField1, j avax.swin    g     .GroupLayout.PREFERRED_S  IZE   , 140, ja    vax.swing.GroupLayout      .PREFERRED_      SIZE  )
                           .addContai  nerG       ap())
          );
          jPanel   2Lay       out.setVerticalGrou  p(   
                  jPanel2L       ay          out.createParallelGroup(ja   vax.swing.G      r      oupLayo ut.Al  ignment.LEADI  NG)
            .addGro  up(jPanel2Lay            out.createS     equen tialG      roup()
                       .addC o      n            t  ainerGap()
                   .ad         dGroup(j  Panel2Layout.createParallelGro   up(javax.swi ng.GroupL  ayout.Alig       nment.BA   SELINE)
                                  .addC  o        mponent  (jLabel1    )
                         .addCompone   nt(jText  Field1, javax.s         wing.GroupLayout    .PREFERRED_S  IZE,   javax.swing.Grou   p  Layout.D   EFAULT_SIZE  ,   javax.swi      ng.GroupLa yout.PREFER RED_SI  ZE)
                                        .addC   omponent    (j  Label3)
                       .addCompone    nt(jComb   oBox2, ja  vax.swing.Group     La   yout.PREFERRE        D _SIZE, javax.swi   ng.GroupLayout.DEFAULT_S   IZE,      javax.swin g.    GroupLayout.PREFERR   ED    _SIZE)
                                .a       ddCompo      nent(jLabel2)
                       .addCo     mponent(jC   omboBox1, j   avax.swin    g.GroupLayout.PREFER    RED_SIZE, javax.swing.Grou       pLayou        t.DEFAULT_SI  ZE, javax.swing.GroupL   ayout.PREFERR     ED_SI           ZE))
                    .ad dGap(1   8, 1    8, 18)
                       .addCompon ent(jButton1)   
                                        . ad     dCo  ntainerGap(javax.swing.Gro upLayou  t.DEFAU L T_SIZE, S   hort.M    AX_VALUE     ))
        );

                 jLabel4.setFont    (n  ew    java.awt.Font("Tekt    on   Pro Ext", 1,    24    ));   // N              O   I18N     
                   jL  abel4.setH   orizontalAli gnment( javax.swing.Swin      gConstants.CENTER );
           jLabel  4.setText("CITY");

               jButton2. setText(  "Comp    lete           adding city");     
        jB    utton2.addAc   tionListen          er(ne    w java         .awt.event.ActionListener() {
                           publi     c void action   Performe           d(ja          va.    awt.ev         ent.ActionEvent ev    t) {
                     jButto   n              2ActionP   erformed(evt)     ;
                         }
           });

        javax.s  wing.      GroupLay out lay  out =   new javax.swing.GroupLayout(getContentPa     ne())       ;
              ge  tCon    tentPane(   ).se             tLa    yout(layout);    
        layout.setHorizontalGroup(     
                   layout.createParallelGrou   p(javax.swing       .GroupLay   out.Al ignment.LE      AD     ING  )
            .addGroup(layout.cr    eateSequenti               alGroup(    )
                  .addG        roup(layout.   createParallelGroup(j  avax.sw    ing.GroupLayout.Alignment .      LEADI N   G)
                    .   ad dGroup(   layout. createSequ  ent        ia l Group()
                                        .addContainerGap()
                             .addGr    oup(la  y        out         .createParalle     lGroup(ja vax.swing.G     ro  u      p    Layout.A    lignment.LEADING    )
                                                   .ad         dComponent          (jPanel1, javax.swing.GroupLayou   t.     PREFERR   ED_SIZE  , javax.swing.    GroupLayout.DEFAULT_S   I    Z    E, javax  . swing.GroupLayo  ut.P REFERRED    _ SIZE)
                            .ad dComp     onent(jPan   el2, javax.s  w       ing.Group     Layout.    DEFAULT_SIZE, javax.swing.Group Layout.DEFAULT_SIZE, Sh ort.M     AX_VALU  E))    )
                       .addGr oup( layout.cre    a   teSeq     uentialGroup()
                                . addGap(184, 184, 184     )    
                              .add      C      omponent(jButton2,    javax.swing.G  roupLayout.PR       EFE   R   RED_SIZE, 21    3, javax.swing.G      roupLa     yout.PREFERRE           D_    SIZ            E))
                    .add   Group(layout.createSequen   tialG   ro    up()
                        .addG   ap(1    59,      159, 159)
                                      .addComponen    t(jLabe    l4, javax.swi        ng.GroupLa y  out.PREFER   R ED_S  I       ZE   , 274, javax.swing.GroupLayou          t.PRE      FERRED_S       IZE)))
                .addCo       ntain erGap(  ))
           );
            layout.setVerticalGr   oup(
            layout.createPa        rallelGroup(javax.  swing.Gr oupLayout.Alignment.LEADIN     G)
             .addGroup( javax.s     wi   ng.GroupLayout       .     Ali   gnment.TRAIL   ING, layout.creat  eSe    quent  ialGrou  p()
                        .ad    d   ContainerGap( )
                              .ad    dCom      po         n   en      t(jL    ab        el4   )
                   .a  dd  Gap(18, 18   ,   1      8)
                      .ad  d     Component(jPanel2, javax.swing  .GroupLayout.PRE   FERRED_SIZE, javax.  s    win g.Group     Layout.DEFAULT_SIZ  E, javax.    swing.G roupLay   out.PREFERRED   _SIZ   E)
                   .addGap(18  ,       18    , 1    8)
                            .addCo           mponent   (jPanel1, javax.swing.GroupLa  yout.DEFAU        LT_SIZE,   jav    ax.   swing.GroupLayout.DEFAUL   T_SIZE  , Short.    MA     X_V   ALUE)
                      .addGa  p(1  2, 12, 12)
                                    .addCompone       nt(jBut  ton2)
                    .addConta  inerGap())
           );

                 pack();
         }// </edi   tor      - fold>//G EN-END:initCom     pon    ents

     pr ivate vo    i     d jPane    l1MouseClicked(java.awt.ev     e n   t.Mous  eEvent          evt) {/     /GEN-FIRST:event_jPan       el1Mouse  Cl    icked
                    // TODO    add y        our           handling code here:
        
         int   x=ev  t.getX();
         int y=evt     .ge    tY();
             String pl  ac    e=JOptionPane.showInputDi     alog("        enter the  Land Mark");
               g=jPanel1      .getGraphics()      ;
               g.fi   llOval(x , y       , 10, 10);
        g.drawStr   ing   (pla  ce, x     -10, y-10);
             
          St   ring url="       insert into city_de script   ion   "+  " values      ('"+city+"',' "+pl ace+"'       ,"+x+   ",  "+y+       ")";
          db.execute   updat e(url);
       
       
       }//GEN-LAST:event_jPanel1MouseClick      ed

               private   void      jButton2ActionPerform    ed(jav       a.awt.even   t.Ac    tio      nEvent ev  t)          {//GEN  -FIRST:event_jBu       tton2  Acti  onPerformed
               // TODO   add your    handling code here:
         jComboBox 1   .   removeItem("Select")    ;
           jComboBox2.re  m    oveItem(     "S           el ect");
        
                Db           conn db     =new Dbconn  ();
     
                         String u  rl="select    LandMar   k from city_des   cription         where N         ame_of_city ='    "       +city+"'";
        db.execu tequery(url);
     try{            while(db.rs.nex    t()){  
             Str ing str=db.rs.getString("LandMark   ").trim(         );  
         jComb     o Box1.addItem(str);
     jCo   mb   oBox2.addItem(str)    ;  
    
     } 
   //  jP   anel2  .setVisible(true       );
              if(  co   unt==1  ){
       Dbconn db1=new D  bcon    n(        ); 
       db1.executequ    er               y("selec  t * from      city   _description where    Name_Of_City='"+city+"'");
        g=j    Pa   nel1.getGr   aphics();
          whil  e (db1.    rs      .n  ext())  
         {         
                  Stri    ng la     nd=db1.rs  .getSt  ring(2).trim();
                       int x=I    nteger     .parseIn  t(db1.rs.getStrin                    g    (3)     );
               i     nt  y=Int    eger  .parseInt(    db1.rs.getS   tring(4));
            
            g  .fillOval(x, y, 10     , 10);
                 g.drawS                 tr     ing(l      and, x-10, y-10);
            }
     c ount++;}   
                }cat                       ch(SQLException e   ){System.out.println(e.    getMessage())          ;}
//     
//       
               
    }//GEN-LAST    :event_jButton2ActionPer  forme  d

        priv   ate vo     id jB   utton1A       ctionPerformed(java.awt.event. ActionEvent evt) {  //GE  N-FIRST       :      event_jBu   tton1Ac tionPerformed
                          //   TODO add y  our handling code      here  :
/   /                try{            
//                
//                 url= "jdbc:o dbc:vehi  c le        ";
//                       
/    /            
/  /           Class.forNa   me("sun.jdbc.odbc.JdbcOd      bcD  river")    ;
//                                   
//       }catch(C                      lassNotFound  Exceptio    n e)
//              {
//                    Sys     tem .       ou   t.printl  n(e.getMessage  (        )+ e.getSt   ackT  race());
    //       }
//          try{
//       Connecti      o        n   con   = DriverMa      nager.g    etCon     nection(u   rl,    "root","root@root");
//      St     ateme n     t  s=con.createSt  atement   ();
//              PreparedStatem   ent   ps= co    n.pre        pareSt           at ement("insert                 into Path values     (?,?     ,?)");
 //                            ps.setString(       1, jComboB    ox1.getS      electedI    tem().toStri     ng());
//                                               ps.set     Stri  ng(2,         jCombo Box2        .getSelec   ted           It em()     .           toString  ());
//                             ps.setSt     ring(3, jText        Fie      ld1   .getText( ));
//                             ps.exec   u   teUpdate();
//                                   
/    ///                        
//       
//        Gr      aphics g g=jPane l1.g     et      Graphi      cs();
//                   R   esultSe t     rs           =s.executeQ  uer  y("se  lect * from city_d     esc    ript  ion     where  La   ndMark='"+jComboBox1.getSel  ec tedItem(     ).toString()+"'" );
//             rs.next();
/     /               int x1=In     t eger.parseInt(rs.get    String   (3));
//           int y1=Integer.parseInt(rs.get    String(4 ));
//        
//                     rs=s.executeQue    ry("select  *    f rom city_desc   ripti    on where La          ndMark='  "+jComboBox1.getSelectedItem                   ().to     String()+"'" )    ;
//         rs.ne xt()         ;
/     /       in  t x2=Integ    er.parseInt(r           s.getStrin     g(3));
//           i nt y2=Integer.parseInt(rs.getString(4));
//       gg.drawL  ine(x1,y 1,x2,y2  );  
//       
                         //Gr  aphi  cs2D  ggg= (Graphics     2D)j Panel    1.getG     raphi    cs();
                      
               try{
                       Class.for   Name   ("s  un.jdbc.od   bc.JdbcOd      bcDriver");
                Connection con = DriverManager  .g  etC   onn   ec   tion(        "jdbc:o    dbc:vehicle","root","ro    ot  @r   oot");
        Statemen     t s        2          = con .cr    eat   eStateme  nt()       ;
             
            R      esultSet rs2 =s2.executeQu    ery      ("   select * from city_descripti     on wh   ere Name_O f_City='    "+city+"'     AND LandMark='"+jComb   oBox1.getS   el              ectedIte    m(  ).t   oStri ng()      +"   '    ");
                             int x1=0,x2=0,y1=0,y2=0;
                             
                          if(jComboBox1.getSelectedItem().toSt   ring().equa   ls    IgnoreCase(jComboBox2.getSelec  tedItem().  toString(  )     )){
                   JOptionPan    e.showMessageDialog(rootPane, "Both     ci t      y1 and city2 are same");
        }    
            
        
        rs2.next() ;
               x1=rs2.getInt(3);
         y1=rs2.getInt(4);
              
        
           rs2=s2.ex   ecuteQuery("    s       elect * fro     m cit y_descri ption where Nam   e_Of_City='"+city+"    ' AND La  ndMark='"+jC       omboBo   x2.getSe  l     ectedItem(    )  .toString()+"  '");
        rs2.n     ext();
            x2=rs2     .getInt(3);
                      System.out.pr   intln(x1+" "+  x2+" "+y1+" "+y2  );
                 y2=rs2.  getInt(4 );
       
                              if(x1*x2*y2*y1>0){
            System.o ut.println(    4);
             Graphics ggg=jPanel1.getGraphics();
                 g   gg.s  etColor(Color  .BLA     CK);    
            ggg.  d     rawLine(x1+5, y1+5, x2+5, y2+5) ;
             ggg.drawString(jText Fi    eld1.get  T  ext(),(x1+x2)/2, (y   1+y2)/2);
                    }
            
   P      reparedStatement ps=con.prepareStatement("insert into path values(?,?,?,?)");
                              ps.setString(1,jComboB    ox1    .getSelectedItem().toString())  ;
                       ps.setString(2, jComboBox2.getSelectedIte   m().toString());
                     ps.setString(3   , jTextField1.getText ());
                     ps.setSt       ring(4, city);
        
                            ps.executeUpdate();
                       }catch(Exception e){System.o     ut.println(e.getMessage());}    
       
        
       }//GE  N-LAST:event_jButton1ActionPerformed


    /**
     * @para    m args the command line arguments
     */
    public static void main(String args[]) {
        /* Set   th    e Nimbus look and feel */
        //<editor    -fol  d defaultstate="coll     ap     sed" desc=" Look and feel setting code (optional) ">
           /* If Nimbus (int   roduced in Java SE 6) is not available, stay with the default loo      k  and feel.
         * For deta  ils see http://download.oracle.com/javase/tutorial/uisw   ing/lookandfeel/plaf.html 
             */
              try {
              for   (javax.swing.UIManager.     LookAndFeelInfo info : javax.swin g.UIManage    r.getIn     stalledLookAndFeels()) {
                    if ("Nim     bus".equals(info.getName())) {
                           javax.swing.UIMana    ger.setLookAndFe el(info.getClassName());
                        break;
                    }
              }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Add_City.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (I   nstantiationException ex) {
                   java.util.logging.Logger.getLogger(Add_City.class.getName()).log(java.util.logging.Level.SEVER E, nul   l, ex);
        } cat   ch (IllegalAccessException ex) {
               java.util.logging.Logger.getLogger(Add_Ci ty.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAnd FeelException ex)       {
            java.util.logging.Logger.getLogger(Add_City.class.getName()).log(java.util.logging.Level.SEVERE, null,     ex);
        }
        //</e ditor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new Add_City().setVisible(true);
            }
            }); 
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JBu tton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JComboBox jComboBox1;
    private javax.swing.JComboBo   x jComboBox2;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration//GEN-END:variables
}
