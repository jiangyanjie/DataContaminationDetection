package taskman.ticket10163;

import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Locale;
import java.util.Map;

public class CountryUtil {

	public static List<String> countries = (List<String>) Arrays.asList(Locale.getISOCountries());

	static Map<String, Integer> countryToPhoneMap = new HashMap<String, Integer>();
	static Map<Integer, String> phoneToCountryMap = new HashMap<Integer, String>();
	static {
		countryToPhoneMap.put("AF", 93);
		countryToPhoneMap.put("AX", 358);
		countryToPhoneMap.put("AL", 355);
		countryToPhoneMap.put("DZ", 213);
		countryToPhoneMap.put("AS", 684);
		countryToPhoneMap.put("AD", 376);
		countryToPhoneMap.put("AO", 244);
		countryToPhoneMap.put("AI", 1264);
		countryToPhoneMap.put("AQ", 672);
		countryToPhoneMap.put("AG", 1268);
		countryToPhoneMap.put("AR", 54);
		countryToPhoneMap.put("AM", 374);
		countryToPhoneMap.put("AW", 297);
		countryToPhoneMap.put("AC", 247);
		countryToPhoneMap.put("AU", 61);
		countryToPhoneMap.put("AT", 43);
		countryToPhoneMap.put("AZ", 994);
		countryToPhoneMap.put("BS", 1242);
		countryToPhoneMap.put("BH", 973);
		countryToPhoneMap.put("BD", 880);
		countryToPhoneMap.put("BB", 1246);
		countryToPhoneMap.put("BY", 375);
		countryToPhoneMap.put("BE", 32);
		countryToPhoneMap.put("BZ", 501);
		countryToPhoneMap.put("BJ", 229);
		countryToPhoneMap.put("BM", 1441);
		countryToPhoneMap.put("BT", 975);
		countryToPhoneMap.put("BO", 591);
		countryToPhoneMap.put("BA", 387);
		countryToPhoneMap.put("BW", 267);
		countryToPhoneMap.put("BV", 55);
		countryToPhoneMap.put("BR", 55);
		countryToPhoneMap.put("IO", 246);
		countryToPhoneMap.put("VG", 284);
		countryToPhoneMap.put("BN", 673);
		countryToPhoneMap.put("BG", 359);
		countryToPhoneMap.put("BF", 226);
		countryToPhoneMap.put("BI", 257);
		countryToPhoneMap.put("KH", 855);
		countryToPhoneMap.put("CM", 237);
		countryToPhoneMap.put("CA", 1);
		countryToPhoneMap.put("CV", 238);
		countryToPhoneMap.put("KY", 345);
		countryToPhoneMap.put("CF", 236);
		countryToPhoneMap.put("TD", 235);
		countryToPhoneMap.put("CL", 56);
		countryToPhoneMap.put("CN", 86);
		countryToPhoneMap.put("CX", 61);
		countryToPhoneMap.put("CC", 61);
		countryToPhoneMap.put("CO", 57);
		countryToPhoneMap.put("KM", 269);
		countryToPhoneMap.put("CD", 243);
		countryToPhoneMap.put("CG", 242);
		countryToPhoneMap.put("CK", 682);
		countryToPhoneMap.put("CR", 506);
		countryToPhoneMap.put("CI", 225);
		countryToPhoneMap.put("HR", 385);
		countryToPhoneMap.put("CU", 53);
		countryToPhoneMap.put("CY", 357);
		countryToPhoneMap.put("CZ", 420);
		countryToPhoneMap.put("DK", 45);
		countryToPhoneMap.put("DJ", 253);
		countryToPhoneMap.put("DM", 1767);
		countryToPhoneMap.put("DO", 809);
		countryToPhoneMap.put("TP", 670);
		countryToPhoneMap.put("EC", 593);
		countryToPhoneMap.put("EG", 20);
		countryToPhoneMap.put("SV", 503);
		countryToPhoneMap.put("GQ", 291);
		countryToPhoneMap.put("ER", 291);
		countryToPhoneMap.put("EE", 372);
		countryToPhoneMap.put("ET", 251);
		countryToPhoneMap.put("FK", 500);
		countryToPhoneMap.put("FO", 298);
		countryToPhoneMap.put("FJ", 679);
		countryToPhoneMap.put("FI", 358);
		countryToPhoneMap.put("FR", 33);
		countryToPhoneMap.put("GF", 689);
		countryToPhoneMap.put("PF", 594);
		countryToPhoneMap.put("TF", 262);
		countryToPhoneMap.put("GA", 237);
		countryToPhoneMap.put("GM", 220);
		countryToPhoneMap.put("GE", 995);
		countryToPhoneMap.put("DE", 49);
		countryToPhoneMap.put("GH", 233);
		countryToPhoneMap.put("GI", 350);
		countryToPhoneMap.put("GR", 30);
		countryToPhoneMap.put("GL", 298);
		countryToPhoneMap.put("GD", 1473);
		countryToPhoneMap.put("GP", 590);
		countryToPhoneMap.put("GU", 1671);
		countryToPhoneMap.put("GT", 502);
		countryToPhoneMap.put("GG", 44);
		countryToPhoneMap.put("GN", 224);
		countryToPhoneMap.put("GW", 245);
		countryToPhoneMap.put("GY", 592);
		countryToPhoneMap.put("HT", 509);
		countryToPhoneMap.put("HN", 504);
		countryToPhoneMap.put("HK", 852);
		countryToPhoneMap.put("HU", 36);
		countryToPhoneMap.put("IS", 354);
		countryToPhoneMap.put("IN", 975);
		countryToPhoneMap.put("ID", 62);
		countryToPhoneMap.put("IR", 98);
		countryToPhoneMap.put("IQ", 964);
		countryToPhoneMap.put("IE", 353);
		countryToPhoneMap.put("IM", 44);
		countryToPhoneMap.put("IL", 972);
		countryToPhoneMap.put("IT", 39);
		countryToPhoneMap.put("JM", 876);
		countryToPhoneMap.put("JP", 81);
		countryToPhoneMap.put("JE", 44);
		countryToPhoneMap.put("JO", 962);
		countryToPhoneMap.put("KZ", 7);
		countryToPhoneMap.put("KE", 254);
		countryToPhoneMap.put("KI", 686);
		countryToPhoneMap.put("KP", 850);
		countryToPhoneMap.put("KR", 82);
		countryToPhoneMap.put("KW", 965);
		countryToPhoneMap.put("KG", 996);
		countryToPhoneMap.put("LA", 856);
		countryToPhoneMap.put("LV", 371);
		countryToPhoneMap.put("LB", 961);
		countryToPhoneMap.put("LS", 266);
		countryToPhoneMap.put("LR", 231);
		countryToPhoneMap.put("LY", 218);
		countryToPhoneMap.put("LI", 423);
		countryToPhoneMap.put("LT", 370);
		countryToPhoneMap.put("LU", 352);
		countryToPhoneMap.put("MO", 853);
		countryToPhoneMap.put("MK", 389);
		countryToPhoneMap.put("MG", 261);
		countryToPhoneMap.put("MW", 265);
		countryToPhoneMap.put("MY", 60);
		countryToPhoneMap.put("MV", 960);
		countryToPhoneMap.put("ML", 223);
		countryToPhoneMap.put("MT", 356);
		countryToPhoneMap.put("MH", 692);
		countryToPhoneMap.put("MQ", 596);
		countryToPhoneMap.put("MR", 222);
		countryToPhoneMap.put("MU", 230);
		countryToPhoneMap.put("YT", 269);
		countryToPhoneMap.put("MX", 52);
		countryToPhoneMap.put("FM", 691);
		countryToPhoneMap.put("MD", 373);
		countryToPhoneMap.put("MC", 377);
		countryToPhoneMap.put("MN", 976);
		countryToPhoneMap.put("ME", 382);
		countryToPhoneMap.put("MS", 664);
		countryToPhoneMap.put("MA", 212);
		countryToPhoneMap.put("MZ", 258);
		countryToPhoneMap.put("MM", 95);
		countryToPhoneMap.put("NA", 264);
		countryToPhoneMap.put("NR", 674);
		countryToPhoneMap.put("NP", 977);
		countryToPhoneMap.put("NL", 31);
		countryToPhoneMap.put("AN", 599);
		countryToPhoneMap.put("NC", 687);
		countryToPhoneMap.put("NZ", 64);
		countryToPhoneMap.put("NI", 505);
		countryToPhoneMap.put("NE", 227);
		countryToPhoneMap.put("NG", 234);
		countryToPhoneMap.put("NU", 683);
		countryToPhoneMap.put("NF", 683);
		countryToPhoneMap.put("MP", 1670);
		countryToPhoneMap.put("NO", 47);
		countryToPhoneMap.put("OM", 968);
		countryToPhoneMap.put("PK", 92);
		countryToPhoneMap.put("PW", 680);
		countryToPhoneMap.put("PS", 970);
		countryToPhoneMap.put("PA", 507);
		countryToPhoneMap.put("PG", 675);
		countryToPhoneMap.put("PY", 595);
		countryToPhoneMap.put("PE", 51);
		countryToPhoneMap.put("PH", 63);
		countryToPhoneMap.put("PN", 870);
		countryToPhoneMap.put("PL", 48);
		countryToPhoneMap.put("PT", 351);
		countryToPhoneMap.put("PR", 1);
		countryToPhoneMap.put("QA", 974);
		countryToPhoneMap.put("RE", 262);
		countryToPhoneMap.put("RO", 40);
		countryToPhoneMap.put("RU", 7);
		countryToPhoneMap.put("RW", 250);
		countryToPhoneMap.put("SH", 290);
		countryToPhoneMap.put("KN", 869);
		countryToPhoneMap.put("LC", 758);
		countryToPhoneMap.put("VC", 264);
		countryToPhoneMap.put("PM", 508);
		countryToPhoneMap.put("WS", 685);
		countryToPhoneMap.put("SM", 378);
		countryToPhoneMap.put("ST", 239);
		countryToPhoneMap.put("SA", 966);
		countryToPhoneMap.put("SN", 221);
		countryToPhoneMap.put("RS", 381);
		countryToPhoneMap.put("SC", 248);
		countryToPhoneMap.put("SL", 232);
		countryToPhoneMap.put("SG", 65);
		countryToPhoneMap.put("SK", 421);
		countryToPhoneMap.put("SI", 386);
		countryToPhoneMap.put("SB", 677);
		countryToPhoneMap.put("SO", 252);
		countryToPhoneMap.put("ZA", 266);
		countryToPhoneMap.put("GS", 44);
		countryToPhoneMap.put("ES", 376);
		countryToPhoneMap.put("LK", 94);
		countryToPhoneMap.put("SD", 249);
		countryToPhoneMap.put("SR", 597);
		countryToPhoneMap.put("SJ", 47);
		countryToPhoneMap.put("SZ", 268);
		countryToPhoneMap.put("SE", 46);
		countryToPhoneMap.put("CH", 423);
		countryToPhoneMap.put("SY", 963);
		countryToPhoneMap.put("TW", 886);
		countryToPhoneMap.put("TJ", 992);
		countryToPhoneMap.put("TZ", 255);
		countryToPhoneMap.put("TH", 66);
		countryToPhoneMap.put("TG", 229);
		countryToPhoneMap.put("TK", 682);
		countryToPhoneMap.put("TO", 676);
		countryToPhoneMap.put("TT", 868);
		countryToPhoneMap.put("TN", 216);
		countryToPhoneMap.put("TR", 90);
		countryToPhoneMap.put("TM", 993);
		countryToPhoneMap.put("TC", 649);
		countryToPhoneMap.put("TV", 61);
		countryToPhoneMap.put("VI", 1);
		countryToPhoneMap.put("UG", 256);
		countryToPhoneMap.put("UA", 380);
		countryToPhoneMap.put("AE", 971);
		countryToPhoneMap.put("UK", 44);
		countryToPhoneMap.put("US", 1);
		countryToPhoneMap.put("UY", 598);
		countryToPhoneMap.put("UZ", 998);
		countryToPhoneMap.put("VU", 678);
		countryToPhoneMap.put("VA", 39);
		countryToPhoneMap.put("VE", 58);
		countryToPhoneMap.put("VN", 84);
		countryToPhoneMap.put("WF", 687);
		countryToPhoneMap.put("YE", 967);
		countryToPhoneMap.put("ZM", 260);
		countryToPhoneMap.put("ZW", 263);
	}

	static {
		for (String country : countryToPhoneMap.keySet()) {
			phoneToCountryMap.put(countryToPhoneMap.get(country), country);
		}
	}

	public static String getCountryCode(String email) {
		int lastIndexOfDot = email.lastIndexOf(".");
		if (lastIndexOfDot > 0) {
			String possibleCountryCode = email.substring(lastIndexOfDot + 1).toUpperCase();
			if (countries.contains(possibleCountryCode)) {
				return possibleCountryCode;
			}
			if (possibleCountryCode.equals("UK")) {
				return "GB";
			}
		}
		return null;
	}

}
